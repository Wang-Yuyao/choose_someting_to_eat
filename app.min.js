$(function () {
    function t(t, e) {
        return t = t || 100, e = e || 0, Math.ceil(Math.random() * (t - e) + e)
    }

    function e(t) {
        var e = $("<div class='comment'>" + t + "</div>");
        e.on("animationend webkitAnimationEnd", function (t) {
            $(this).remove()
        }).appendTo(g)
    }

    function n(t, e) {
        if (!i) {
            if (d = t, o.text(m[d][0]), s.text("什么"), c.text("？"), a.addClass("shake"), k = 0, e) {
                var n = $(".tip").show();
                setTimeout(function () {
                    n.remove()
                }, 4e3)
            }
            _hmt.push(["_trackEvent", "time", "change", m[d][0]])
        }
    }

    var i = 0, a = $(".title"), o = $(".time"), s = $(".what"), c = $(".punctuation"), l = $("#start"),
        r = $("#temp_container"),
        m = [["午饭", "肯德基 麦当劳 麻辣烫 麻辣香锅 煲仔饭 香辣牛蛙 小碗菜 小炒肉 酸菜鱼 韩式拌饭 猪排饭 黑椒牛柳炒面 咖喱鸡饭 猪脚饭 干炒牛河 湿炒牛河 意面 毛血旺 饭团 饺砸 白切鸡拼烧鸭饭 云吞面 猪扒包 沙县小吃 关东煮 牛杂煲 烧鸡 重庆小面 芝士焗饭 拌粉 三明治 滑蛋鸡扒饭 豉油皇炒面 牛肉拌面 凉面".split(" ")], ["午饭"], ["午饭", "肯德基 麦当劳 麻辣烫 麻辣香锅 煲仔饭 香辣牛蛙 小碗菜 小炒肉 酸菜鱼 韩式拌饭 猪排饭 黑椒牛柳炒面 咖喱鸡饭 猪脚饭 干炒牛河 湿炒牛河 意面 毛血旺 饭团 饺砸 白切鸡拼烧鸭饭 云吞面 猪扒包 沙县小吃 关东煮 牛杂煲 烧鸡 重庆小面 芝士焗饭 拌粉 三明治 滑蛋鸡扒饭 豉油皇炒面 牛肉拌面 凉面".split(" ")]],
        d = 2, p = (new Date).getHours(), f = $(window), g = $("body"), v = $("#wrapper"), x = $(".os"), k = 0,
        w = "human", b, C, E;
    m[1][1] = m[2][1], a.on("animationend webkitAnimationEnd", function (t) {
        $(this).removeClass("shake")
    }), r.on("animationend webkitAnimationEnd", function (t) {
        $(t.target).remove()
    }), l.click(function () {
        if (g.toggleClass("playing", !i), i) i = 0, "monster" == w && x.text(u[t(u.length)]), c.text("！"), l.find("span").text("换一个"), clearTimeout(b), document.title = a.text() + "这是一个很无聊的网站，但能解决你的人生一大困扰！选择困难户必备！"; else {
            i = 1, k++, 2 == k && e("我就知道你会换一个 ( ͡° ͜ʖ ͡°)"), 5 == k && e("说，你是不是天秤座？Σ( ° △ °|||)︴"), 10 == k && e("你是吃了炫迈吗？(￣△￣；)"), 20 == k && e("难道你是处女座？ (๑•̀ㅂ•́)و✧"), 30 == k && e("再换我可要报警了！( *・ω・)✄╰ひ╯");
            var n = "human" == w ? m[d][1] : h;
            c.text("？"), l.find("span").text("停"), x.text(""), function o() {
                var e = t(n.length) - 1, i = n[e], a = t(C), c = t(E - 50), l = t(37, 14);
                s.text(i);
                var m = $("<span class='temp'>" + i + "</span>").css({
                    top: a,
                    left: c,
                    color: "rgba(0,0,0," + t(7, 3) / 10 + ")",
                    fontSize: l + "px"
                }).appendTo(r);
                b = setTimeout(o, 60)
            }()
        }
    }), $("#toggle span").click(function () {
        $(this).hasClass("selected") || ($(this).addClass("selected").siblings().removeClass("selected"), w = $(this).data("type"), alert("monster" == w ? "注意！前方高能！" : "还是人类好吃呢Ψ(￣∀￣)Ψ"), k = 0, _hmt.push(["_trackEvent", "type", "toggle", w]))
    }), 9 > p || p >= 23 ? n(0, 1) : 13 > p && n(1, 1), a.click(function () {
        n(d >= m.length - 1 ? 0 : d + 1)
    }), $("#ribbon").click(function () {
        return alert(this.title), !1
    }), f.resize(function () {
        E = f.width(), C = f.height()
    }).resize()
});